# MARBL continuous integration testing (via Github Actions)
name: MARBL CI

on:
    push:
        branches: [ stable, development ]
    pull_request:
        branches: [ stable, development ]

jobs:
    MARBL-Testing:
        runs-on: ubuntu-20.04

        strategy:
            matrix:
                python-version:
                    - 3.7

        steps:
            - uses: actions/checkout@v2

            - name: Load Environment
              run: |
                sudo apt-get update
                sudo apt install make gfortran netcdf-bin libnetcdf-dev libnetcdff-dev openmpi-bin libopenmpi-dev

            - name: Setup Python ${{ matrix.python-version }}
              uses: actions/setup-python@v2
              with:
                python-version: $ {{ matrix.python-version }}

#            - name: build-docs

            - name: Run Tests
              run : |
                cd MARBL_tools
                ./run_test_suite.sh
